# 品質ガイドライン

## 🛡️ 絶対に実行してはならない行為

### ESLint設定
- ❌ 型安全性ルールの`'off'`設定
- ❌ `'no-explicit-any'`の無効化
- ❌ `'no-unsafe-*'`ルールの無効化
- ❌ `'no-unused-vars'`の無効化

### CI/CD設定
- ❌ `|| true`による失敗隠蔽
- ❌ `--passWithNoTests`の常用
- ❌ 品質チェックのスキップ
- ❌ エラーの意図的な無視

### Git操作
- ❌ `--no-verify`コミットの使用
- ❌ 品質チェック回避の意図的実行
- ❌ pre-commitフックの無効化

## ✅ 品質向上の正しいアプローチ

### 1. 問題の根本原因を特定
```bash
# ESLintエラーの詳細を確認
npm run lint

# TypeScriptエラーの詳細を確認
npx tsc --noEmit

# テストカバレッジを確認
npm run test:cov
```

### 2. 適切な解決策を実装
- エラーを修正（隠蔽ではなく）
- 型安全性を維持
- テストを追加
- ドキュメントを更新

### 3. 段階的な改善実行
- 一度に全てを修正する必要はない
- `warn`レベルから始めて段階的に`error`へ
- 品質メトリクスを継続的に監視

## 📊 品質基準

### 必須基準（エラーレベル）
- ESLintエラー: 0個
- TypeScriptエラー: 0個
- ビルドエラー: 0個
- テスト失敗: 0個

### 推奨基準（警告レベル）
- ESLint警告: 300個以下（段階的に削減）
- テストカバレッジ: 70%以上
- 複雑度: 10以下

## 🔍 コードレビューチェックリスト

### 品質設定変更時
- [ ] ESLintルール変更の正当性確認
- [ ] CI/CD設定変更の影響評価
- [ ] テスト設定変更の妥当性検証
- [ ] 依存関係の更新確認

### 品質メトリクス
- [ ] ESLintエラー数の増減確認
- [ ] TypeScriptエラーの有無確認
- [ ] テストカバレッジの維持確認
- [ ] ビルド成功の確認

### セキュリティ
- [ ] 機密情報の露出がないか確認
- [ ] 依存関係の脆弱性確認
- [ ] APIキー・トークンの適切な管理

## 🚀 品質改善ワークフロー

### 1. 現状把握
```bash
# 品質メトリクスレポート生成
npm run lint 2>&1 | grep -E "(error|warning)"
npx tsc --noEmit 2>&1 | grep -c "error"
npm run test:cov
```

### 2. 目標設定
- 短期目標: エラー0個維持
- 中期目標: 警告を200個以下に削減
- 長期目標: 警告を50個以下に削減

### 3. 実行と監視
- 毎日の品質チェック実行
- PRごとの品質ゲート確認
- 月次の品質トレンド分析

## 📈 段階的厳格化ロードマップ

### Phase 1（現在）
- ESLintエラー: 0個（達成済み）
- ESLint警告: 300個以下
- pre-commit警告上限: 350個

### Phase 2（1ヶ月後）
- ESLint警告: 200個以下
- pre-commit警告上限: 250個
- テストカバレッジ: 60%以上

### Phase 3（3ヶ月後）
- ESLint警告: 100個以下
- pre-commit警告上限: 150個
- テストカバレッジ: 70%以上

### Phase 4（6ヶ月後）
- ESLint警告: 50個以下
- pre-commit警告上限: 50個
- テストカバレッジ: 80%以上
- 全ルールを`error`レベルに

## 🏆 品質文化の醸成

### チーム全体で
- 品質は全員の責任
- 問題を隠蔽せず共有
- 継続的な改善を推進

### 個人として
- コミット前の自己チェック
- レビュー時の品質確認
- 品質改善の提案

## 🆘 困ったときは

### ESLintエラーが解決できない
1. エラーメッセージを詳しく読む
2. 公式ドキュメントを確認
3. チームメンバーに相談
4. 一時的に`warn`レベルに下げて段階的に解決

### テストが失敗する
1. エラーログを確認
2. 関連するコードの変更を確認
3. テストケースが正しいか検証
4. 必要に応じてテストを更新

### ビルドが通らない
1. 依存関係を確認
2. TypeScriptエラーを確認
3. 環境変数を確認
4. クリーンビルドを試す

## 📝 更新履歴

- 2025-01-27: 初版作成
- ESLintエラー0個達成記念
- 段階的厳格化ロードマップ策定