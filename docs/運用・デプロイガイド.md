# ã‚½ã‚¯ãƒ–ãƒ„é‹ç”¨ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰

## ğŸ¯ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã¯ã€ã‚½ã‚¯ãƒ–ãƒ„ã‚·ã‚¹ãƒ†ãƒ ã®æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¨ç¶™ç¶šçš„ãªé‹ç”¨ã®ãŸã‚ã®åŒ…æ‹¬çš„ãªæ‰‹é †æ›¸ã§ã™ã€‚è‡ªå®…ã‚µãƒ¼ãƒãƒ¼ï¼ˆWSL2ï¼‰ç’°å¢ƒã§ã®æœ€é©åŒ–ã•ã‚ŒãŸé‹ç”¨æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£æ¦‚è¦

### é‹ç”¨ç’°å¢ƒ
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: è‡ªå®…ã‚µãƒ¼ãƒãƒ¼ï¼ˆWSL2 on Windowsï¼‰
- **ã‚³ãƒ³ãƒ†ãƒŠ**: Docker + docker-compose
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: SQLiteï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- **ç›£è¦–**: vibelogger + Telegramé€šçŸ¥
- **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†**: Docker restart policies

### æ¨å¥¨ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä»•æ§˜
- **CPU**: Intel i5-9400Tä»¥ä¸Šï¼ˆ6ã‚³ã‚¢æ¨å¥¨ï¼‰
- **ãƒ¡ãƒ¢ãƒª**: 8GBä»¥ä¸Šï¼ˆé‹ç”¨æ™‚2GBã€é–‹ç™ºæ™‚4GBï¼‰
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: SSD 50GBä»¥ä¸Šã®ç©ºãå®¹é‡
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: å®‰å®šã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š

## ğŸš€ WSL2ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. WSL2ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®š

#### WSL2æœ‰åŠ¹åŒ–
```powershell
# PowerShellï¼ˆç®¡ç†è€…æ¨©é™ï¼‰ã§å®Ÿè¡Œ
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

# å†èµ·å‹•å¾Œ
wsl --set-default-version 2
```

#### Ubuntuã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```powershell
# Microsoft Storeã‹ã‚‰Ubuntu 22.04 LTSã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
wsl --install -d Ubuntu-22.04

# ç¢ºèª
wsl --list --verbose
```

#### WSL2ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
```bash
# ~/.wslconfig (Windowså´)
[wsl2]
memory=4GB
processors=4
swap=2GB
localhostForwarding=true
```

### 2. Ubuntuç’°å¢ƒæ§‹ç¯‰

#### ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°
```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y build-essential curl git vim
```

#### Node.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Node.js 18.x ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node --version
npm --version
```

#### Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Dockerå…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’dockerã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ 
sudo usermod -aG docker $USER
newgrp docker

# docker-composeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ‰‹é †

### 1. æœ¬ç•ªç’°å¢ƒæº–å‚™

#### ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
```bash
# æœ¬ç•ªç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p ~/production/sokubutsu
cd ~/production/sokubutsu

# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/denof-inc/sokubutsu2.git .
git checkout main
```

#### ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
```bash
# æœ¬ç•ªç”¨.envä½œæˆ
cp .env.example .env.production

# å¿…è¦ãªç’°å¢ƒå¤‰æ•°è¨­å®š
nano .env.production
```

```bash
# .env.productionå†…å®¹ä¾‹
NODE_ENV=production
TELEGRAM_BOT_TOKEN=your_production_bot_token
TELEGRAM_CHAT_ID=your_production_chat_id
DATABASE_PATH=./data/production.db
LOG_LEVEL=info
MONITORING_INTERVAL=5
```

### 2. Dockeræœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

#### æœ¬ç•ªç”¨docker-composeè¨­å®š
```yaml
# docker-compose.prod.yml
version: '3.8'
services:
  sokubutsu:
    build:
      context: .
      dockerfile: Dockerfile.prod
    container_name: sokubutsu-mvp
    restart: always
    env_file:
      - .env.production
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    ports:
      - "3000:3000"
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'
        reservations:
          memory: 256M
          cpus: '0.25'
    healthcheck:
      test: ["CMD", "node", "healthcheck.js"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
```

#### æœ¬ç•ªç”¨Dockerfile
```dockerfile
# Dockerfile.prod
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine

RUN apk add --no-cache chromium
ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
ENV PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser

WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY . .

RUN npm run build

USER node
EXPOSE 3000

HEALTHCHECK --interval=30s --timeout=10s --retries=3 --start-period=40s \
  CMD node healthcheck.js

CMD ["npm", "run", "start:prod"]
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
```bash
# æœ¬ç•ªãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•
docker-compose -f docker-compose.prod.yml up -d --build

# èµ·å‹•ç¢ºèª
docker-compose -f docker-compose.prod.yml logs -f sokubutsu

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç¢ºèª
docker-compose -f docker-compose.prod.yml ps
```

### 3. SSLè¨¼æ˜æ›¸è¨­å®šï¼ˆHTTPSå¯¾å¿œï¼‰

#### Let's Encrypt + nginx-proxyè¨­å®š
```yaml
# docker-compose.ssl.yml
version: '3.8'
services:
  nginx-proxy:
    image: jwilder/nginx-proxy
    container_name: nginx-proxy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /var/run/docker.sock:/tmp/docker.sock:ro
      - ./nginx/certs:/etc/nginx/certs
    restart: always

  letsencrypt:
    image: jrcs/letsencrypt-nginx-proxy-companion
    container_name: letsencrypt
    volumes_from:
      - nginx-proxy
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    restart: always

  sokubutsu:
    extends:
      file: docker-compose.prod.yml
      service: sokubutsu
    environment:
      - VIRTUAL_HOST=your-domain.com
      - LETSENCRYPT_HOST=your-domain.com
      - LETSENCRYPT_EMAIL=your-email@example.com
```

## ğŸ“Š ç›£è¦–ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### 1. ãƒ­ã‚°ç›£è¦–

#### ãƒ­ã‚°è¨­å®š
```typescript
// src/logger.ts
import { createLogger } from 'vibelogger';

export const logger = createLogger({
  level: process.env.LOG_LEVEL || 'info',
  output: {
    console: true,
    file: {
      path: './logs/sokubutsu.log',
      rotation: 'daily',
      maxFiles: 30
    }
  },
  structured: true
});
```

#### ãƒ­ã‚°ç¢ºèªã‚³ãƒãƒ³ãƒ‰
```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç›£è¦–
docker-compose -f docker-compose.prod.yml logs -f sokubutsu

# ç‰¹å®šæœŸé–“ã®ãƒ­ã‚°ç¢ºèª
docker-compose -f docker-compose.prod.yml logs --since "2025-01-01" sokubutsu

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç›´æ¥ç¢ºèª
tail -f logs/sokubutsu.log

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿
docker-compose logs sokubutsu 2>&1 | grep -i error
```

### 2. ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–

#### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè£…
```typescript
// healthcheck.js
const http = require('http');

const options = {
  host: 'localhost',
  port: 3000,
  path: '/health',
  timeout: 2000
};

const request = http.request(options, (res) => {
  if (res.statusCode === 200) {
    process.exit(0);
  } else {
    process.exit(1);
  }
});

request.on('error', () => process.exit(1));
request.end();
```

#### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ç›£è¦–
```bash
# Dockerã‚³ãƒ³ãƒ†ãƒŠã®çµ±è¨ˆæƒ…å ±
docker stats sokubutsu-mvp

# ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
htop
free -h
df -h

# ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–
ps aux | grep node
```

#### ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆcronè¨­å®šï¼‰
```bash
# monitoring.sh
#!/bin/bash
CONTAINER_NAME="sokubutsu-mvp"
LOG_FILE="/home/user/logs/monitoring.log"

# ã‚³ãƒ³ãƒ†ãƒŠç¨¼åƒç¢ºèª
if ! docker ps | grep -q $CONTAINER_NAME; then
    echo "$(date): Container $CONTAINER_NAME is down. Restarting..." >> $LOG_FILE
    docker-compose -f /home/user/production/sokubutsu/docker-compose.prod.yml up -d
fi

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ç¢ºèªï¼ˆ80%ä»¥ä¸Šã§è­¦å‘Šï¼‰
DISK_USAGE=$(df / | awk 'NR==2 {print $(NF-1)}' | sed 's/%//')
if [ $DISK_USAGE -gt 80 ]; then
    echo "$(date): Disk usage is ${DISK_USAGE}%" >> $LOG_FILE
fi
```

```bash
# cronã‚¸ãƒ§ãƒ–è¨­å®š
crontab -e

# 5åˆ†ã”ã¨ã«ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
*/5 * * * * /home/user/scripts/monitoring.sh

# æ¯æ—¥åˆå‰2æ™‚ã«ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
0 2 * * * find /home/user/logs -name "*.log" -mtime +30 -delete
```

### 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```bash
# backup.sh
#!/bin/bash
BACKUP_DIR="/home/user/backups"
DATE=$(date +%Y%m%d_%H%M%S)

# ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
tar -czf $BACKUP_DIR/sokubutsu_data_$DATE.tar.gz -C /home/user/production/sokubutsu data/

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤ï¼ˆ30æ—¥ä»¥ä¸Šï¼‰
find $BACKUP_DIR -name "sokubutsu_data_*.tar.gz" -mtime +30 -delete

echo "Backup completed: sokubutsu_data_$DATE.tar.gz"
```

#### å¾©æ—§æ‰‹é †
```bash
# ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
docker-compose -f docker-compose.prod.yml down

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
cd ~/production/sokubutsu
tar -xzf ~/backups/sokubutsu_data_YYYYMMDD_HHMMSS.tar.gz

# ã‚µãƒ¼ãƒ“ã‚¹å†é–‹
docker-compose -f docker-compose.prod.yml up -d

# å¾©æ—§ç¢ºèª
docker-compose -f docker-compose.prod.yml logs sokubutsu
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã—ãªã„
```bash
# ãƒ­ã‚°ç¢ºèª
docker-compose -f docker-compose.prod.yml logs sokubutsu

# ã‚¤ãƒ¡ãƒ¼ã‚¸å†ãƒ“ãƒ«ãƒ‰
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml build --no-cache
docker-compose -f docker-compose.prod.yml up -d
```

#### ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼
```bash
# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç¢ºèª
free -h
docker stats

# Swapé ˜åŸŸè¿½åŠ 
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# æ°¸ç¶šåŒ–
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

#### Puppeteerã‚¨ãƒ©ãƒ¼ï¼ˆWSL2ç’°å¢ƒï¼‰
```bash
# Chromeä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt-get update
sudo apt-get install -y chromium-browser

# ç’°å¢ƒå¤‰æ•°è¨­å®š
export PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
export PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser
```

#### ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³
```bash
# ä¸è¦ãªDockerãƒªã‚½ãƒ¼ã‚¹å‰Šé™¤
docker system prune -a

# å¤ã„ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
find logs/ -name "*.log" -mtime +7 -delete

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚ºç¢ºèª
ls -lah data/
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Dockerè¨­å®šæœ€é©åŒ–
```yaml
# docker-compose.prod.yml
services:
  sokubutsu:
    # ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'
    
    # ãƒ­ã‚°ãƒ‰ãƒ©ã‚¤ãƒãƒ¼è¨­å®š
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
```

#### WSL2ãƒ¡ãƒ¢ãƒªåˆ¶é™
```ini
# ~/.wslconfig
[wsl2]
memory=4GB
processors=4
swap=2GB
localhostForwarding=true
kernelCommandLine=cgroup_no_v1=memory systemd.unified_cgroup_hierarchy=1
```

## ğŸ”„ ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### 1. GitHub Actions CI/CDè¨­å®š

```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: self-hosted
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to production
      run: |
        docker-compose -f docker-compose.prod.yml down
        docker-compose -f docker-compose.prod.yml build --no-cache
        docker-compose -f docker-compose.prod.yml up -d
        
    - name: Health check
      run: |
        sleep 30
        curl -f http://localhost:3000/health || exit 1
        
    - name: Notify deployment
      run: |
        # Telegramé€šçŸ¥ç­‰
```

### 2. ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
```bash
# zero-downtime-deploy.sh
#!/bin/bash
set -e

echo "Starting zero-downtime deployment..."

# æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker-compose -f docker-compose.prod.yml up -d --scale sokubutsu=2 --no-recreate

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¾…æ©Ÿ
sleep 30

# å¤ã„ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
docker-compose -f docker-compose.prod.yml up -d --scale sokubutsu=1 --no-recreate

echo "Deployment completed successfully"
```

## ğŸ“š é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æ—¥æ¬¡ãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ç¢ºèª
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç¢ºèª

### é€±æ¬¡ãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª
- [ ] ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ãƒ¬ãƒ“ãƒ¥ãƒ¼

### æœˆæ¬¡ãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
- [ ] ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å¥å…¨æ€§ç¢ºèª
- [ ] å®¹é‡è¨ˆç”»è¦‹ç›´ã—
- [ ] ç½å®³å¾©æ—§æ‰‹é †ãƒ†ã‚¹ãƒˆ

## ğŸ“ ç·Šæ€¥æ™‚å¯¾å¿œæ‰‹é †

### ã‚µãƒ¼ãƒ“ã‚¹å®Œå…¨åœæ­¢æ™‚
```bash
# 1. çŠ¶æ³ç¢ºèª
docker-compose -f docker-compose.prod.yml ps
docker-compose -f docker-compose.prod.yml logs --tail=100 sokubutsu

# 2. å¼·åˆ¶å†èµ·å‹•
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml up -d --force-recreate

# 3. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl -f http://localhost:3000/health
```

### ãƒ‡ãƒ¼ã‚¿ç ´ææ™‚
```bash
# 1. ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
docker-compose -f docker-compose.prod.yml down

# 2. æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§
tar -xzf ~/backups/sokubutsu_data_latest.tar.gz

# 3. ã‚µãƒ¼ãƒ“ã‚¹å†é–‹
docker-compose -f docker-compose.prod.yml up -d
```

---

**æ›´æ–°æ—¥**: 2025å¹´8æœˆ26æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0ï¼ˆWSL2 + Dockeræœ¬ç•ªé‹ç”¨å¯¾å¿œï¼‰