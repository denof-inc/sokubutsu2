# staged filesのみをチェック（lint-staged使用）
echo "🔍 Running pre-commit checks on staged files..."
npm run precommit || {
  echo "❌ Pre-commit checks failed. Fix errors before committing."
  exit 1
}

# 型チェック（迅速）
echo "🔎 Typecheck (tsc --noEmit)"
npm run typecheck || {
  echo "❌ Typecheck failed. Fix errors before committing."
  exit 1
}

# 単体テスト（コミット時に全テスト実行）
echo "🧪 Running unit tests..."
npm run test || {
  echo "❌ Tests failed. Fix failing tests before committing."
  exit 1
}

echo "✅ All checks passed!"
