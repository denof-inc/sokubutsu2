# ã‚½ã‚¯ãƒ–ãƒ„MVP - æ–°ç€ç‰©ä»¶é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹

**å®Œå…¨ãƒªã‚»ãƒƒãƒˆæˆ¦ç•¥æº–æ‹ å®Ÿè£…ç‰ˆ**

## ğŸ¯ æ¦‚è¦

ã‚½ã‚¯ãƒ–ãƒ„MVPã¯ã€athome.co.jpã®æ–°ç€ç‰©ä»¶ã‚’ç›£è¦–ã—ã€Telegramã§å³åº§ã«é€šçŸ¥ã™ã‚‹è»½é‡ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

### æˆ¦ç•¥æº–æ‹ ã®ç‰¹å¾´

- âœ… **HTTP-firstæˆ¦ç•¥**: è»½é‡ãƒ»é«˜é€Ÿå‡¦ç†ï¼ˆ2-5ç§’ï¼‰
- âœ… **æœ€å°é™ä¾å­˜é–¢ä¿‚**: 12ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿
- âœ… **Dockerå¯¾å¿œ**: è‡ªå®…ã‚µãƒ¼ãƒãƒ¼æœ€é©åŒ–
- âœ… **å®Œå…¨ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: Lint/Jest/CI/CDå®Œå‚™
- âœ… **ä»Šæ—¥ä¸­ç¨¼åƒ**: ã‚³ãƒ”ãƒšã§å³åº§èµ·å‹•

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ5åˆ†ã§èµ·å‹•ï¼‰

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
git clone <repository-url>
cd sokubutsu-mvp
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ä»¥ä¸‹ã‚’è¨­å®š:
# TELEGRAM_BOT_TOKEN=your_bot_token_here
# TELEGRAM_CHAT_ID=your_chat_id_here
# MONITORING_URLS=https://www.athome.co.jp/chintai/tokyo/list/
```

### 3. å‹•ä½œç¢ºèª
```bash
# æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run manual:test

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
npm run start:dev
```

### 4. æœ¬ç•ªç¨¼åƒ
```bash
# Dockerç’°å¢ƒã§èµ·å‹•
npm run docker:run

# ã¾ãŸã¯ç›´æ¥èµ·å‹•
npm run build
npm start
```

## ğŸ“‹ ç’°å¢ƒå¤‰æ•°è¨­å®š

| å¤‰æ•°å | å¿…é ˆ | èª¬æ˜ | ä¾‹ |
|--------|------|------|-----|
| `TELEGRAM_BOT_TOKEN` | âœ… | Telegram Botã®Token | `123456:ABC-DEF...` |
| `TELEGRAM_CHAT_ID` | âœ… | é€šçŸ¥å…ˆã®Chat ID | `123456789` |
| `MONITORING_URLS` | âœ… | ç›£è¦–ã™ã‚‹URLï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ | `https://www.athome.co.jp/...` |
| `MONITORING_INTERVAL` | âŒ | ç›£è¦–é–“éš”ï¼ˆcronå½¢å¼ï¼‰ | `*/5 * * * *` (5åˆ†é–“éš”) |
| `PORT` | âŒ | ãƒãƒ¼ãƒˆç•ªå· | `3000` |
| `NODE_ENV` | âŒ | å®Ÿè¡Œç’°å¢ƒ | `production` |
| `DATA_DIR` | âŒ | ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | `./data` |
| `LOG_LEVEL` | âŒ | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« | `info` |

## ğŸ› ï¸ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™º
npm run start:dev          # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰èµ·å‹•
npm run manual:test        # æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

# ãƒ†ã‚¹ãƒˆãƒ»å“è³ªãƒã‚§ãƒƒã‚¯
npm run test               # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:watch         # ãƒ†ã‚¹ãƒˆç›£è¦–ãƒ¢ãƒ¼ãƒ‰
npm run test:coverage      # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
npm run lint               # ESLintå®Ÿè¡Œãƒ»è‡ªå‹•ä¿®æ­£
npm run lint:check         # ESLintå®Ÿè¡Œï¼ˆä¿®æ­£ãªã—ï¼‰
npm run quality:check      # å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆlint+test+buildï¼‰

# ãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•
npm run build              # TypeScriptãƒ“ãƒ«ãƒ‰
npm start                  # æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰èµ·å‹•

# Docker
npm run docker:build       # Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
npm run docker:run         # Docker Composeèµ·å‹•
npm run docker:stop        # Docker Composeåœæ­¢
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | å®Ÿæ¸¬å€¤ç¢ºèªæ–¹æ³• |
|------|--------|----------------|
| èµ·å‹•æ™‚é–“ | 1-2ç§’ | `npm run manual:test` |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 30-50MB | `npm run manual:test` |
| å®Ÿè¡Œæ™‚é–“ | 2-5ç§’ | ãƒ­ã‚°å‡ºåŠ›ã§ç¢ºèª |
| ä¾å­˜é–¢ä¿‚æ•° | 12ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | `package.json`ã§ç¢ºèª |

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
src/
â”œâ”€â”€ main.ts              # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ config.ts            # è¨­å®šç®¡ç†
â”œâ”€â”€ types.ts             # å‹å®šç¾©
â”œâ”€â”€ logger.ts            # ãƒ­ã‚°ç®¡ç†
â”œâ”€â”€ performance.ts       # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
â”œâ”€â”€ scraper.ts           # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆHTTP-firstï¼‰
â”œâ”€â”€ telegram.ts          # Telegramé€šçŸ¥
â”œâ”€â”€ storage.ts           # ãƒ‡ãƒ¼ã‚¿ä¿å­˜ï¼ˆJSONï¼‰
â”œâ”€â”€ scheduler.ts         # ç›£è¦–ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
â”œâ”€â”€ manual-test.ts       # æ‰‹å‹•ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ test-setup.ts        # ãƒ†ã‚¹ãƒˆè¨­å®š
â””â”€â”€ __tests__/           # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ scraper.test.ts
    â””â”€â”€ storage.test.ts
```

## ğŸ³ Dockeré‹ç”¨

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•
```bash
# èµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f

# åœæ­¢
docker-compose down

# å†èµ·å‹•
docker-compose restart
```

### ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™
- ãƒ¡ãƒ¢ãƒªåˆ¶é™: 256MB
- CPUåˆ¶é™: 0.5ã‚³ã‚¢
- ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³: 10MB Ã— 3ãƒ•ã‚¡ã‚¤ãƒ«

## ğŸ“± Telegram Botè¨­å®š

### 1. Botä½œæˆ
1. [@BotFather](https://t.me/BotFather) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. `/newbot` ã‚³ãƒãƒ³ãƒ‰ã§Botä½œæˆ
3. Bot Tokenã‚’å–å¾—

### 2. Chat IDå–å¾—
1. ä½œæˆã—ãŸBotã«ä½•ã‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
2. `https://api.telegram.org/bot<BOT_TOKEN>/getUpdates` ã«ã‚¢ã‚¯ã‚»ã‚¹
3. `chat.id` ã‚’ç¢ºèª

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. Telegramæ¥ç¶šã‚¨ãƒ©ãƒ¼
```
âŒ Telegramæ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ
```
**è§£æ±ºæ–¹æ³•:**
- Bot TokenãŒæ­£ã—ã„ã‹ç¢ºèª
- Chat IDãŒæ­£ã—ã„ã‹ç¢ºèª
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª

#### 2. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼
```
âŒ ç‰©ä»¶è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ
```
**è§£æ±ºæ–¹æ³•:**
- URLãŒæ­£ã—ã„ã‹ç¢ºèª
- athome.co.jpã®ã‚µã‚¤ãƒˆæ§‹é€ å¤‰æ›´ã®å¯èƒ½æ€§
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™æœªé”æˆ
```
âš ï¸ å®Ÿè¡Œæ™‚é–“ãŒç›®æ¨™ã‚’è¶…é: 6000ms > 5000ms
```
**è§£æ±ºæ–¹æ³•:**
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦ã‚’ç¢ºèª
- ç›£è¦–URLæ•°ã‚’æ¸›ã‚‰ã™
- ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒšãƒƒã‚¯ã‚’ç¢ºèª

### ãƒ­ã‚°ç¢ºèªæ–¹æ³•

```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°
docker-compose logs -f sokubutsu-mvp

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -la logs/
cat logs/sokubutsu-$(date +%Y-%m-%d).log
```

## ğŸ“ˆ ç›£è¦–ãƒ»é‹ç”¨

### çµ±è¨ˆæƒ…å ±
- 1æ™‚é–“ã”ã¨ã«Telegramã§çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡
- `data/statistics.json` ã§è©³ç´°ç¢ºèªå¯èƒ½

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã« `data/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ `data/backups/` ã«ä½œæˆ

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
```bash
# æœ€æ–°ç‰ˆå–å¾—
git pull origin main

# ä¾å­˜é–¢ä¿‚æ›´æ–°
npm install

# å†ãƒ“ãƒ«ãƒ‰ãƒ»å†èµ·å‹•
npm run build
docker-compose restart
```

## ğŸ¤ é–‹ç™ºå‚åŠ 

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd sokubutsu-mvp

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰èµ·å‹•
npm run start:dev
```

### ã‚³ãƒ¼ãƒ‰å“è³ªåŸºæº–
- ESLint: ã‚¨ãƒ©ãƒ¼0ä»¶å¿…é ˆ
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 70%ä»¥ä¸Š
- TypeScript: strict mode
- å…¨ãƒ†ã‚¹ãƒˆæˆåŠŸå¿…é ˆ

### Pull Request
1. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
2. `npm run quality:check` æˆåŠŸç¢ºèª
3. ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»æ›´æ–°
4. Pull Requestä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ™‹â€â™‚ï¸ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. `npm run manual:test` ã§è¨ºæ–­å®Ÿè¡Œ
2. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
3. Issueä½œæˆï¼ˆãƒ­ã‚°æ·»ä»˜ï¼‰

---

**ğŸ‰ ã‚½ã‚¯ãƒ–ãƒ„MVPã§ç†æƒ³ã®ç‰©ä»¶ã¨ã®å‡ºä¼šã„ã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã™ï¼**